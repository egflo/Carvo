
<div class="container-main">
  <div class="filter-container">
    <cdk-accordion class="example-accordion">
      <cdk-accordion-item
        #accordionItemYear="cdkAccordionItem"
        class="accordion-item"
        role="button"
        tabindex="0"
        [attr.id]="'accordion-header-year'"
        [attr.aria-expanded]="accordionItemYear.expanded"
        [attr.aria-controls]="'accordion-body-year'">
        <div class="accordion-item-header" (click)="accordionItemYear.toggle()">
          Year
          <span class="accordion-item-description">
                Click to {{ accordionItemYear.expanded ? 'close' : 'open' }}
            </span>
        </div>
        <div
          class="accordion-item-body"
          role="region"
          [style.display]="accordionItemYear.expanded ? '' : 'none'"
          [attr.id]="'accordion-body-year'"
          [attr.aria-labelledby]="'accordion-header-year'">
          <div class = "year-container">
            <select  id="start-year" class="form-select" aria-label="start-year" (change)="onChangeSelect($event)">
              <option selected>Select Start Year</option>
              <option *ngFor="let year of startYears" [value]="year" [selected]="year == startYear">{{ year }}</option>
            </select>
            <select id="end-year" class="form-select" aria-label="end-year" (change)="onChangeSelect($event)">
              <option selected>Select End Year</option>
              <option *ngFor="let year of endYears" [value]="year" [selected]="year == endYear">{{ year }}</option>
            </select>
          </div>
        </div>
      </cdk-accordion-item>

      <cdk-accordion-item
        #accordionItemMake="cdkAccordionItem"
        class="accordion-item"
        role="button"
        tabindex="0"
        [attr.id]="'accordion-header-make'"
        [attr.aria-expanded]="accordionItemMake.expanded"
        [attr.aria-controls]="'accordion-body-make'">
        <div class="accordion-item-header" (click)="accordionItemMake.toggle()">
          Make
          <span class="accordion-item-description">
                Click to {{ accordionItemMake.expanded ? 'close' : 'open' }}
            </span>
        </div>
        <div
          class="accordion-item-body"
          role="region"
          [style.display]="accordionItemMake.expanded ? '' : 'none'"
          [attr.id]="'accordion-body-make'"
          [attr.aria-labelledby]="'accordion-header-make'">
          <div class = "make-container">
              <div *ngFor="let make of makes" class="form-check">
                <input class="form-check-input" name="make" type="checkbox" value="{{make.id}}"
                       id="make-{{make.id}}" (change)="onChangeCheck($event)"  [checked]="make.selected">
                <label class="form-check-label" for="make-{{make.id}}">
                  {{make.name}}
                </label>
              </div>
          </div>
        </div>
      </cdk-accordion-item>

      <cdk-accordion-item
        #accordionItemBody="cdkAccordionItem"
        class="accordion-item"
        role="button"
        tabindex="0"
        [attr.id]="'accordion-header-body-type'"
        [attr.aria-expanded]="accordionItemBody.expanded"
        [attr.aria-controls]="'accordion-body-type'">
        <div class="accordion-item-header" (click)="accordionItemBody.toggle()">
          Body Type
          <span class="accordion-item-description">
                Click to {{ accordionItemBody.expanded ? 'close' : 'open' }}
            </span>
        </div>
        <div
          class="accordion-item-body"
          role="region"
          [style.display]="accordionItemBody.expanded ? '' : 'none'"
          [attr.id]="'accordion-body-body-type'"
          [attr.aria-labelledby]="'accordion-header-body-type'">
          <div class = "body-container">
            <div *ngFor="let body of types" class="form-check">
              <input class="form-check-input" type="checkbox"  name="body" (change)="onChangeCheck($event)"
                     value="{{body.id}}" id="body-type-{{body.id}}" [checked]="body.selected">
              <label class="form-check-label" for="body-type-{{body.id}}">
                {{body.type}}
              </label>
            </div>
          </div>
        </div>
      </cdk-accordion-item>

      <cdk-accordion-item
        #accordionItemFuel="cdkAccordionItem"
        class="accordion-item"
        role="button"
        tabindex="0"
        [attr.id]="'accordion-header-fuel'"
        [attr.aria-expanded]="accordionItemFuel.expanded"
        [attr.aria-controls]="'accordion-body-fuel'">
        <div class="accordion-item-header" (click)="accordionItemFuel.toggle()">
          Fuel Type
          <span class="accordion-item-description">
                Click to {{ accordionItemFuel.expanded ? 'close' : 'open' }}
            </span>
        </div>
        <div
          class="accordion-item-body"
          role="region"
          [style.display]="accordionItemFuel.expanded ? '' : 'none'"
          [attr.id]="'accordion-body-fuel'"
          [attr.aria-labelledby]="'accordion-header-fuel'">
          <div class = "body-container">
            <div *ngFor="let fuel of fuels" class="form-check">
              <input class="form-check-input" type="checkbox" name="fuel" (change)="onChangeCheck($event)"
                     value="{{fuel.id}}" id="fuel-type-{{fuel.id}}" [checked]="fuel.selected">
              <label class="form-check-label" for="fuel-type-{{fuel.id}}">
                {{fuel.type}}
              </label>
            </div>
          </div>
        </div>
      </cdk-accordion-item>

      <cdk-accordion-item
        #accordionItemMiles="cdkAccordionItem"
        class="accordion-item"
        role="button"
        tabindex="0"
        [attr.id]="'accordion-header-miles'"
        [attr.aria-expanded]="accordionItemMiles.expanded"
        [attr.aria-controls]="'accordion-body-miles'">
        <div class="accordion-item-header" (click)="accordionItemMiles.toggle()">
          Mileage
          <span class="accordion-item-description">
                Click to {{ accordionItemMiles.expanded ? 'close' : 'open' }}
            </span>
        </div>
        <div
          class="accordion-item-body"
          role="region"
          [style.display]="accordionItemMiles.expanded ? '' : 'none'"
          [attr.id]="'accordion-body-body-miles'"
          [attr.aria-labelledby]="'accordion-header-body-miles'">
          <div class = "mileage-container">
            <label for="mileage" class="form-label">{{mileage}} miles or fewer</label>
            <input type="range" class="form-range" id="mileage" min="0" max="400000" [value]="mileage"
                   (change)="onChangeMileage($event)">
          </div>
        </div>
      </cdk-accordion-item>

      <cdk-accordion-item
        #accordionItemColor="cdkAccordionItem"
        class="accordion-item"
        role="button"
        tabindex="0"
        [attr.id]="'accordion-header-color'"
        [attr.aria-expanded]="accordionItemColor.expanded"
        [attr.aria-controls]="'accordion-body-color'">
        <div class="accordion-item-header" (click)="accordionItemColor.toggle()">
          Exterior Color
          <span class="accordion-item-description">
                Click to {{ accordionItemColor.expanded ? 'close' : 'open' }}
            </span>
        </div>
        <div
          class="accordion-item-body"
          role="region"
          [style.display]="accordionItemColor.expanded ? '' : 'none'"
          [attr.id]="'accordion-body-color'"
          [attr.aria-labelledby]="'accordion-header-color'">
          <div class = "color-container">
            <label *ngFor="let color of colors"  class="container">
              {{color.name.charAt(0).toUpperCase() + color.name.slice(1).toLowerCase()}}
              <input type="checkbox" [checked]="color.selected" value="{{color.id}}" name="color" (change)="onChangeCheck($event)">
              <span class="checkmark" [ngStyle]="{'background-color': color.name.toLowerCase()}"></span>
            </label>
          </div>
        </div>
      </cdk-accordion-item>

      <cdk-accordion-item
        #accordionItemDrivetrain="cdkAccordionItem"
        class="accordion-item"
        role="button"
        tabindex="0"
        [attr.id]="'accordion-header-drivetrain'"
        [attr.aria-expanded]="accordionItemDrivetrain.expanded"
        [attr.aria-controls]="'accordion-body-drivetrain'">
        <div class="accordion-item-header" (click)="accordionItemDrivetrain.toggle()">
          Drivetrain
          <span class="accordion-item-description">
                Click to {{ accordionItemDrivetrain.expanded ? 'close' : 'open' }}
            </span>
        </div>
        <div
          class="accordion-item-body"
          role="region"
          [style.display]="accordionItemDrivetrain.expanded ? '' : 'none'"
          [attr.id]="'accordion-body-drivetrain'"
          [attr.aria-labelledby]="'accordion-header-drivetrain'">
          <div class = "body-container">
            <div *ngFor="let drivetrain of drivetrains" class="form-check">
              <input class="form-check-input" type="checkbox" name="drivetrain" (change)="onChangeCheck($event)"
                     value="{{drivetrain.id}}" id="drive-type-{{drivetrain.id}}">
              <label class="form-check-label" for="drive-type-{{drivetrain.id}}">
                {{drivetrain.name}}
              </label>
            </div>
          </div>
        </div>
      </cdk-accordion-item>

      <cdk-accordion-item
        #accordionItemTransmission="cdkAccordionItem"
        class="accordion-item"
        role="button"
        tabindex="0"
        [attr.id]="'accordion-header-transmission'"
        [attr.aria-expanded]="accordionItemTransmission.expanded"
        [attr.aria-controls]="'accordion-body-transmission'">
        <div class="accordion-item-header" (click)="accordionItemTransmission.toggle()">
          Transmission
          <span class="accordion-item-description">
                Click to {{ accordionItemTransmission.expanded ? 'close' : 'open' }}
            </span>
        </div>
        <div
          class="accordion-item-body"
          role="region"
          [style.display]="accordionItemTransmission.expanded ? '' : 'none'"
          [attr.id]="'accordion-body-transmission'"
          [attr.aria-labelledby]="'accordion-header-transmission'">
          <div class = "body-container">
            <div *ngFor="let transmission of transmissions" class="form-check">
              <input class="form-check-input" type="checkbox" name="transmission" (change)="onChangeCheck($event)"
                     value="{{transmission.type}}" id="transmission-type-{{transmission.id}}">
              <label class="form-check-label" for="transmission-type-{{transmission.id}}">
                {{transmission.description}}
              </label>
            </div>
          </div>
        </div>
      </cdk-accordion-item>


    </cdk-accordion>
  </div>



  <div class="results-container">
    <div class="data-container">
      <div *ngIf="(results$ | async) as results; else loading">
        <div *ngFor="let auto of results.content">
          <app-auto-card [auto]="auto"></app-auto-card>
        </div>
        <div class="pagination">
          <mat-paginator [length]="results.numberOfElements"
                         [pageSize]="results.size"
                         [pageSizeOptions]="pageSizeOptions"
                         (page)="onPageChange($event)"
                         aria-label="Select page">
          </mat-paginator>
        </div>
      </div>
      <ng-template #loading>
        <p>Loading...</p>
      </ng-template>
    </div>
  </div>
</div>








